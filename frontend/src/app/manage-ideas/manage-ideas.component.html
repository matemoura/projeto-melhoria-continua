<div class="manage-ideas-container">
  <h2>Gerenciar Ideias</h2>

  <div class="search-container">
    <input type="text" placeholder="Buscar por usuário ou nome do Kaizen..." [(ngModel)]="searchTerm" (input)="onSearchChange()"/>
    <select [(ngModel)]="selectedStatus" (change)="onSearchChange()">
      <option value="">Todos os Status</option>
      <option *ngFor="let status of statuses" [value]="status">{{ formatStatusForDisplay(status) }}</option>
    </select>
  </div>

  <div *ngIf="isLoading" class="feedback-message spinner">
    Carregando ideias...
  </div>

  <div *ngIf="!isLoading && error" class="feedback-message error-message">
    {{ error }}
  </div>

  <div *ngIf="!isLoading && !error">
    <table *ngIf="ideas.length > 0">
      <thead>
        <tr>
          <th>Usuário</th>
          <th>Setor</th>
          <th>Sugestão Nome Kaizen</th>
          <th>Nome Kaizen (Oficial)</th>
          <th>Status</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let idea of ideas">
          <td>{{ idea.nomeUsuario }}</td>
          <td>{{ idea.setor }}</td>
          <td>{{ idea.kaizenNameSuggestion || 'Nenhuma' }}</td>
          <td>
            <input type="text" [(ngModel)]="idea.kaizenName" class="kaizen-name-input" placeholder="Definir nome oficial">
          </td>
          <td>
            <select [(ngModel)]="idea.status">
              <option *ngFor="let status of statuses" [value]="status">
                {{ formatStatusForDisplay(status) }}
              </option>
            </select>
          </td>
          <td>
            <button (click)="updateIdea(idea)" class="save-button">Salvar</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="ideas.length === 0" class="feedback-message empty-message">
      Nenhuma ideia encontrada com os filtros atuais.
    </div>
  </div>
</div>
