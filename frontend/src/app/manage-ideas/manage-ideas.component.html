<div class="manage-ideas-container">
  <h2>Gerenciar Status das Ideias</h2>

  <div *ngIf="isLoading" class="feedback-message">Carregando...</div>
  <div *ngIf="loadError" class="feedback-message error">{{ loadError }}</div>

  <table *ngIf="!isLoading && !loadError">
    <thead>
      <tr>
        <th>Usu√°rio</th>
        <th>Setor</th>
        <th>Problema</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="ideas.length === 0">
          <td colspan="4" style="text-align: center;">Nenhuma ideia para gerenciar.</td>
      </tr>
      <tr *ngFor="let idea of ideas">
        <td>{{ idea.nomeUsuario }}</td>
        <td>{{ idea.setor }}</td>
        <td>{{ idea.descricaoProblema }}</td>
        <td>
          <select 
            [value]="idea.status || 'PENDENTE'" 
            (change)="onStatusChange(idea.id, $event)"
            [disabled]="isUpdating[idea.id]">
            <option *ngFor="let status of statuses" [value]="status">
              {{ formatStatusForDisplay(status) }}
            </option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
</div>
