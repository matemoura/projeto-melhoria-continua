<div class="form-container">
  <div class="form-header">
    <h3>Nova Auditoria 5S</h3>
    <p>Preencha os campos abaixo para registrar a auditoria.</p>
  </div>

  <form [formGroup]="auditForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label for="auditor">Nome do Auditor</label>
      <input id="auditor" formControlName="auditor" type="text" required>
    </div>

    <div formArrayName="auditedAreas">
      <h4>Áreas Auditadas</h4>
      <div *ngFor="let area of auditedAreas.controls; let i = index">
        <fieldset class="area-auditada">
          <legend>Área {{ i + 1 }}</legend>

          <div class="form-group">
            <label for="nomeArea-{{i}}">Nome da Área</label>
            <input id="nomeArea-{{i}}" formControlName="nomeArea" type="text" placeholder="Ex: Linha de Produção A">
          </div>

          <div class="fields-grid">
            <div class="form-group">
              <label for="seiri-{{i}}">Seiri (Utilização)</label>
              <input id="seiri-{{i}}" formControlName="seiri" type="number" min="0" max="10">
            </div>
            <div class="form-group">
              <label for="seiton-{{i}}">Seiton (Organização)</label>
              <input id="seiton-{{i}}" formControlName="seiton" type="number" min="0" max="10">
            </div>
            <div class="form-group">
              <label for="seiso-{{i}}">Seisō (Limpeza)</label>
              <input id="seiso-{{i}}" formControlName="seiso" type="number" min="0" max="10">
            </div>
            <div class="form-group">
              <label for="seiketsu-{{i}}">Seiketsu (Padronização)</label>
              <input id="seiketsu-{{i}}" formControlName="seiketsu" type="number" min="0" max="10">
            </div>
            <div class="form-group">
              <label for="shitsuke-{{i}}">Shitsuke (Disciplina)</label>
              <input id="shitsuke-{{i}}" formControlName="shitsuke" type="number" min="0" max="10">
            </div>
            <div class="form-group">
                <label for="notaFinal-{{i}}">Pontuação Final</label>
                <input id="notaFinal-{{i}}" formControlName="notaFinal" type="number" min="0" max="100">
            </div>
          </div>
        </fieldset>
      </div>
    </div>
    
    <div class="form-actions">
        <button type="button" (click)="addAuditedArea()" class="button button-secondary">Adicionar Área</button>
    </div>

    <div class="form-group">
      <label for="imagem">Anexar Imagem (opcional)</label>
      <input type="file" id="imagem" (change)="onFileSelected($event)">
    </div>

    <input type="hidden" formControlName="auditDateTime">

    <button type="submit" [disabled]="!auditForm.valid" class="button button-submit">Enviar Auditoria</button>
  </form>
</div>
