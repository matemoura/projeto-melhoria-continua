<div class="list-container">
  <div class="list-header">
    <h2>ðŸ’¡ Ideias Enviadas</h2>
    <p>Visualize todas as sugestÃµes de melhoria registradas na plataforma.</p>
  </div>

  <div *ngIf="isLoading" class="spinner">Carregando ideias...</div>
  <div *ngIf="loadError" class="error-message">{{ loadError }}</div>
  <div *ngIf="!isLoading && ideas.length === 0" class="empty-message">
    Nenhuma ideia foi enviada ainda. Seja o primeiro!
  </div>

  <div *ngIf="!isLoading && ideas.length > 0" class="idea-grid">
    <div *ngFor="let idea of ideas" class="idea-card">
      <div class="idea-card-header">
        <div class="user-info">
          <span class="user-avatar">ðŸ‘¤</span>
          <div>
            <h3 class="user-name">{{ idea.nomeUsuario || 'AnÃ´nimo' }}</h3>
            <p class="user-sector">{{ idea.setor }}</p>
          </div>
        </div>
      </div>

      <div class="idea-card-body">
        <div class="info-group">
          <strong>DescriÃ§Ã£o do Problema:</strong>
          <p>{{ idea.descricaoProblema }}</p>
        </div>

        <div class="info-group" *ngIf="idea.possiveisSolucoes">
          <strong>PossÃ­veis SoluÃ§Ãµes:</strong>
          <p>{{ idea.possiveisSolucoes }}</p>
        </div>

        <div class="info-group" *ngIf="idea.impactos?.length">
          <strong>Impactos:</strong>
          <p class="impact-tags">
            <span *ngFor="let impacto of idea.impactos" class="tag">{{ impacto }}</span>
          </p>
        </div>

        <div class="info-grid">
            <div class="info-group" *ngIf="idea.interferencia !== undefined">
              <strong>InterferÃªncia:</strong>
              <p>{{ idea.interferencia }} / 10</p>
            </div>
            <div class="info-group" *ngIf="idea.expectativaMelhoria !== undefined">
              <strong>Expectativa:</strong>
              <p>{{ idea.expectativaMelhoria }} / 10</p>
            </div>
        </div>

        <div class="info-group" *ngIf="idea.nomeKaizen">
          <strong>Nome Kaizen:</strong>
          <p>{{ idea.nomeKaizen }}</p>
        </div>
      </div>

      <div class="idea-card-footer" *ngIf="idea.imageUrl">
        <strong>Anexo:</strong>
        <div *ngIf="idea.imageError" class="error-message-small">{{ idea.imageError }}</div>
        <div *ngIf="!idea.imageBlobUrl && !idea.imageError" class="spinner-small">Carregando imagem...</div>

        <img *ngIf="idea.imageBlobUrl" [src]="idea.imageBlobUrl" alt="Imagem da Ideia" class="idea-image" />

        <div class="image-actions" *ngIf="idea.imageBlobUrl">
          <a [href]="idea.imageBlobUrl" (click)="downloadImage($event, idea)" class="button button-small">Baixar</a>
          <a [href]="idea.imageBlobUrl" target="_blank" rel="noopener noreferrer" class="button button-small button-secondary">Visualizar</a>
        </div>
      </div>
    </div>
  </div>
</div>
